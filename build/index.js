(()=>{"use strict";const e=window.React,t=({tasks:t,fetchTasks:r,setCurrentTaskId:s,setShowCreateForm:a,setShowUpdateForm:n})=>((0,e.useEffect)((()=>{r()}),[]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)("h4",null,"All Tasks"),(0,e.createElement)("table",{class:"table table-striped"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",{scope:"col"},"Title"),(0,e.createElement)("th",{scope:"col"},"Description"),(0,e.createElement)("th",{scope:"col"},"Duration"),(0,e.createElement)("th",{scope:"col"},"Status"),(0,e.createElement)("th",{scope:"col"},"Action"))),(0,e.createElement)("tbody",null,0==t.length&&(0,e.createElement)("p",null,"No task founds."),0!=t.length&&t.map((t=>(0,e.createElement)("tr",{key:t.id},(0,e.createElement)("td",null,t.title),(0,e.createElement)("td",null,t.description),(0,e.createElement)("td",null,t.duration," hours"),(0,e.createElement)("td",null,t.status),(0,e.createElement)("td",null,(0,e.createElement)("button",{class:"btn btn-outline-primary",onClick:()=>(async e=>{s(e),a(!1),n(!0)})(t.id)},"Edit"),(0,e.createElement)("button",{class:"btn btn-outline-danger ms-2",onClick:()=>(async e=>{if(!confirm("Are you sure you want to delete?"))return;let t=makWPtmData.restRoot+`wptm/v1/delete-task/${e}`;try{const e=await fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json","X-WP-Nonce":makWPtmData?.nonce}});if(e.ok){const t=await e.json();console.log(t),r()}else{const t=await e.json();console.error(t)}}catch(e){console.error("Error:",e)}})(t.id)},"Delete")))))))));var r=e=>"checkbox"===e.type,s=e=>e instanceof Date,a=e=>null==e;const n=e=>"object"==typeof e;var o=e=>!a(e)&&!Array.isArray(e)&&n(e)&&!s(e),i=e=>o(e)&&e.target?r(e.target)?e.target.checked:e.target.value:e,l=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),u=e=>{const t=e.constructor&&e.constructor.prototype;return o(t)&&t.hasOwnProperty("isPrototypeOf")},c="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function d(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(c&&(e instanceof Blob||e instanceof FileList)||!r&&!o(e))return e;if(t=r?[]:{},r||u(e))for(const r in e)e.hasOwnProperty(r)&&(t[r]=d(e[r]));else t=e}return t}var m=e=>Array.isArray(e)?e.filter(Boolean):[],f=e=>void 0===e,y=(e,t,r)=>{if(!t||!o(e))return r;const s=m(t.split(/[,[\].]+?/)).reduce(((e,t)=>a(e)?e:e[t]),e);return f(s)||s===e?f(e[t])?r:e[t]:s},p=e=>"boolean"==typeof e;const h={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},b={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},g="pattern",v="required";e.createContext(null);var k=e=>o(e)&&!Object.keys(e).length,E=e=>Array.isArray(e)?e:[e];var w=e=>"string"==typeof e,S=(e,t,r,s,a)=>w(e)?(s&&t.watch.add(e),y(r,e,a)):Array.isArray(e)?e.map((e=>(s&&t.watch.add(e),y(r,e)))):(s&&(t.watchAll=!0),r),_=e=>/^\w*$/.test(e),D=e=>m(e.replace(/["|']|\]/g,"").split(/\.|\[/)),V=(e,t,r)=>{let s=-1;const a=_(t)?[t]:D(t),n=a.length,i=n-1;for(;++s<n;){const t=a[s];let n=r;if(s!==i){const r=e[t];n=o(r)||Array.isArray(r)?r:isNaN(+a[s+1])?{}:[]}e[t]=n,e=e[t]}return e},A=(e,t,r,s,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:a||!0}}:{},F=e=>({isOnSubmit:!e||e===b.onSubmit,isOnBlur:e===b.onBlur,isOnChange:e===b.onChange,isOnAll:e===b.all,isOnTouch:e===b.onTouched}),x=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))));const T=(e,t,r,s)=>{for(const a of r||Object.keys(e)){const r=y(e,a);if(r){const{_f:e,...n}=r;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],a)&&!s)break;if(e.ref&&t(e.ref,e.name)&&!s)break;T(n,t)}else o(n)&&T(n,t)}}};var N=(e,t,r)=>{const s=m(y(e,r));return V(s,"root",t[r]),V(e,r,s),e},C=e=>"file"===e.type,O=e=>"function"==typeof e,j=e=>{if(!c)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},P=e=>w(e),U=e=>"radio"===e.type,L=e=>e instanceof RegExp;const B={value:!1,isValid:!1},W={value:!0,isValid:!0};var M=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!f(e[0].attributes.value)?f(e[0].value)||""===e[0].value?W:{value:e[0].value,isValid:!0}:W:B}return B};const R={isValid:!1,value:null};var I=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),R):R;function q(e,t,r="validate"){if(P(e)||Array.isArray(e)&&e.every(P)||p(e)&&!e)return{type:r,message:P(e)?e:"",ref:t}}var $=e=>o(e)&&!L(e)?e:{value:e,message:""},X=async(e,t,s,n,i)=>{const{ref:l,refs:u,required:c,maxLength:d,minLength:m,min:h,max:b,pattern:E,validate:S,name:_,valueAsNumber:D,mount:V,disabled:F}=e._f,x=y(t,_);if(!V||F)return{};const T=u?u[0]:l,N=e=>{n&&T.reportValidity&&(T.setCustomValidity(p(e)?"":e||""),T.reportValidity())},B={},W=U(l),R=r(l),X=W||R,H=(D||C(l))&&f(l.value)&&f(x)||j(l)&&""===l.value||""===x||Array.isArray(x)&&!x.length,G=A.bind(null,_,s,B),J=(e,t,r,s="maxLength",a="minLength")=>{const n=e?t:r;B[_]={type:e?s:a,message:n,ref:l,...G(e?s:a,n)}};if(i?!Array.isArray(x)||!x.length:c&&(!X&&(H||a(x))||p(x)&&!x||R&&!M(u).isValid||W&&!I(u).isValid)){const{value:e,message:t}=P(c)?{value:!!c,message:c}:$(c);if(e&&(B[_]={type:v,message:t,ref:T,...G(v,t)},!s))return N(t),B}if(!(H||a(h)&&a(b))){let e,t;const r=$(b),n=$(h);if(a(x)||isNaN(x)){const s=l.valueAsDate||new Date(x),a=e=>new Date((new Date).toDateString()+" "+e),o="time"==l.type,i="week"==l.type;w(r.value)&&x&&(e=o?a(x)>a(r.value):i?x>r.value:s>new Date(r.value)),w(n.value)&&x&&(t=o?a(x)<a(n.value):i?x<n.value:s<new Date(n.value))}else{const s=l.valueAsNumber||(x?+x:x);a(r.value)||(e=s>r.value),a(n.value)||(t=s<n.value)}if((e||t)&&(J(!!e,r.message,n.message,"max","min"),!s))return N(B[_].message),B}if((d||m)&&!H&&(w(x)||i&&Array.isArray(x))){const e=$(d),t=$(m),r=!a(e.value)&&x.length>+e.value,n=!a(t.value)&&x.length<+t.value;if((r||n)&&(J(r,e.message,t.message),!s))return N(B[_].message),B}if(E&&!H&&w(x)){const{value:e,message:t}=$(E);if(L(e)&&!x.match(e)&&(B[_]={type:g,message:t,ref:l,...G(g,t)},!s))return N(t),B}if(S)if(O(S)){const e=q(await S(x,t),T);if(e&&(B[_]={...e,...G("validate",e.message)},!s))return N(e.message),B}else if(o(S)){let e={};for(const r in S){if(!k(e)&&!s)break;const a=q(await S[r](x,t),T,r);a&&(e={...a,...G(r,a.message)},N(a.message),s&&(B[_]=e))}if(!k(e)&&(B[_]={ref:T,...e},!s))return B}return N(!0),B};function H(e,t){const r=Array.isArray(t)?t:_(t)?[t]:D(t),s=1===r.length?e:function(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=f(e)?s++:e[t[s++]];return e}(e,r),a=r.length-1,n=r[a];return s&&delete s[n],0!==a&&(o(s)&&k(s)||Array.isArray(s)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!f(e[t]))return!1;return!0}(s))&&H(e,r.slice(0,-1)),e}var G=()=>{let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}},J=e=>a(e)||!n(e);function z(e,t){if(J(e)||J(t))return e===t;if(s(e)&&s(t))return e.getTime()===t.getTime();const r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(const n of r){const r=e[n];if(!a.includes(n))return!1;if("ref"!==n){const e=t[n];if(s(r)&&s(e)||o(r)&&o(e)||Array.isArray(r)&&Array.isArray(e)?!z(r,e):r!==e)return!1}}return!0}var K=e=>"select-multiple"===e.type,Q=e=>U(e)||r(e),Y=e=>j(e)&&e.isConnected,Z=e=>{for(const t in e)if(O(e[t]))return!0;return!1};function ee(e,t={}){const r=Array.isArray(e);if(o(e)||r)for(const r in e)Array.isArray(e[r])||o(e[r])&&!Z(e[r])?(t[r]=Array.isArray(e[r])?[]:{},ee(e[r],t[r])):a(e[r])||(t[r]=!0);return t}function te(e,t,r){const s=Array.isArray(e);if(o(e)||s)for(const s in e)Array.isArray(e[s])||o(e[s])&&!Z(e[s])?f(t)||J(r[s])?r[s]=Array.isArray(e[s])?ee(e[s],[]):{...ee(e[s])}:te(e[s],a(t)?{}:t[s],r[s]):r[s]=!z(e[s],t[s]);return r}var re=(e,t)=>te(e,t,ee(t)),se=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>f(e)?e:t?""===e?NaN:e?+e:e:r&&w(e)?new Date(e):s?s(e):e;function ae(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return C(t)?t.files:U(t)?I(e.refs).value:K(t)?[...t.selectedOptions].map((({value:e})=>e)):r(t)?M(e.refs).value:se(f(t.value)?e.ref.value:t.value,e)}var ne=(e,t,r,s)=>{const a={};for(const r of e){const e=y(t,r);e&&V(a,r,e._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:s}},oe=e=>f(e)?e:L(e)?e.source:o(e)?L(e.value)?e.value.source:e.value:e,ie=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function le(e,t,r){const s=y(e,r);if(s||_(r))return{error:s,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),n=y(t,s),o=y(e,s);if(n&&!Array.isArray(n)&&r!==s)return{name:r};if(o&&o.type)return{name:s,error:o};a.pop()}return{name:r}}var ue=(e,t,r,s,a)=>!a.isOnAll&&(!r&&a.isOnTouch?!(t||e):(r?s.isOnBlur:a.isOnBlur)?!e:!(r?s.isOnChange:a.isOnChange)||e),ce=(e,t)=>!m(y(e,t)).length&&H(e,t);const de={mode:b.onSubmit,reValidateMode:b.onChange,shouldFocusError:!0};function me(e={},t){let n,u={...de,...e},g={submitCount:0,isDirty:!1,isLoading:O(u.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:u.errors||{},disabled:u.disabled||!1},v={},_=(o(u.values)||o(u.defaultValues))&&d(u.values||u.defaultValues)||{},D=u.shouldUnregister?{}:d(_),A={action:!1,mount:!1,watch:!1},P={mount:new Set,unMount:new Set,array:new Set,watch:new Set},U=0;const L={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},B={values:G(),array:G(),state:G()},W=F(u.mode),M=F(u.reValidateMode),R=u.criteriaMode===b.all,I=async e=>{if(L.isValid||e){const e=u.resolver?k((await ee()).errors):await te(v,!0);e!==g.isValid&&B.state.next({isValid:e})}},q=e=>L.isValidating&&B.state.next({isValidating:e}),$=(e,t,r,s)=>{const a=y(v,e);if(a){const n=y(D,e,f(r)?y(_,e):r);f(n)||s&&s.defaultChecked||t?V(D,e,t?n:ae(a._f)):ye(e,n),A.mount&&I()}},Z=(e,t,r,s,a)=>{let n=!1,o=!1;const i={name:e},l=!(!y(v,e)||!y(v,e)._f.disabled);if(!r||s){L.isDirty&&(o=g.isDirty,g.isDirty=i.isDirty=me(),n=o!==i.isDirty);const r=l||z(y(_,e),t);o=!(l||!y(g.dirtyFields,e)),r||l?H(g.dirtyFields,e):V(g.dirtyFields,e,!0),i.dirtyFields=g.dirtyFields,n=n||L.dirtyFields&&o!==!r}if(r){const t=y(g.touchedFields,e);t||(V(g.touchedFields,e,r),i.touchedFields=g.touchedFields,n=n||L.touchedFields&&t!==r)}return n&&a&&B.state.next(i),n?i:{}},ee=async e=>u.resolver(D,u.context,ne(e||P.mount,v,u.criteriaMode,u.shouldUseNativeValidation)),te=async(e,t,r={valid:!0})=>{for(const s in e){const a=e[s];if(a){const{_f:e,...s}=a;if(e){const s=P.array.has(e.name),n=await X(a,D,R,u.shouldUseNativeValidation&&!t,s);if(n[e.name]&&(r.valid=!1,t))break;!t&&(y(n,e.name)?s?N(g.errors,n,e.name):V(g.errors,e.name,n[e.name]):H(g.errors,e.name))}s&&await te(s,t,r)}}return r.valid},me=(e,t)=>(e&&t&&V(D,e,t),!z(ke(),_)),fe=(e,t,r)=>S(e,P,{...A.mount?D:f(t)?_:w(e)?{[e]:t}:t},r,t),ye=(e,t,s={})=>{const n=y(v,e);let o=t;if(n){const s=n._f;s&&(!s.disabled&&V(D,e,se(t,s)),o=j(s.ref)&&a(t)?"":t,K(s.ref)?[...s.ref.options].forEach((e=>e.selected=o.includes(e.value))):s.refs?r(s.ref)?s.refs.length>1?s.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(o)?!!o.find((t=>t===e.value)):o===e.value))):s.refs[0]&&(s.refs[0].checked=!!o):s.refs.forEach((e=>e.checked=e.value===o)):C(s.ref)?s.ref.value="":(s.ref.value=o,s.ref.type||B.values.next({name:e,values:{...D}})))}(s.shouldDirty||s.shouldTouch)&&Z(e,o,s.shouldTouch,s.shouldDirty,!0),s.shouldValidate&&ve(e)},pe=(e,t,r)=>{for(const a in t){const n=t[a],o=`${e}.${a}`,i=y(v,o);!P.array.has(e)&&J(n)&&(!i||i._f)||s(n)?ye(o,n,r):pe(o,n,r)}},he=(e,r,s={})=>{const n=y(v,e),o=P.array.has(e),i=d(r);V(D,e,i),o?(B.array.next({name:e,values:{...D}}),(L.isDirty||L.dirtyFields)&&s.shouldDirty&&B.state.next({name:e,dirtyFields:re(_,D),isDirty:me(e,i)})):!n||n._f||a(i)?ye(e,i,s):pe(e,i,s),x(e,P)&&B.state.next({...g}),B.values.next({name:e,values:{...D}}),!A.mount&&t()},be=async t=>{const r=t.target;let s=r.name,a=!0;const o=y(v,s),l=e=>{a=Number.isNaN(e)||e===y(D,s,e)};if(o){let c,d;const m=r.type?ae(o._f):i(t),f=t.type===h.BLUR||t.type===h.FOCUS_OUT,b=!ie(o._f)&&!u.resolver&&!y(g.errors,s)&&!o._f.deps||ue(f,y(g.touchedFields,s),g.isSubmitted,M,W),E=x(s,P,f);V(D,s,m),f?(o._f.onBlur&&o._f.onBlur(t),n&&n(0)):o._f.onChange&&o._f.onChange(t);const w=Z(s,m,f,!1),S=!k(w)||E;if(!f&&B.values.next({name:s,type:t.type,values:{...D}}),b)return L.isValid&&I(),S&&B.state.next({name:s,...E?{}:w});if(!f&&E&&B.state.next({...g}),q(!0),u.resolver){const{errors:e}=await ee([s]);if(l(m),a){const t=le(g.errors,v,s),r=le(e,v,t.name||s);c=r.error,s=r.name,d=k(e)}}else c=(await X(o,D,R,u.shouldUseNativeValidation))[s],l(m),a&&(c?d=!1:L.isValid&&(d=await te(v,!0)));a&&(o._f.deps&&ve(o._f.deps),((t,r,s,a)=>{const o=y(g.errors,t),i=L.isValid&&p(r)&&g.isValid!==r;var l;if(e.delayError&&s?(l=()=>((e,t)=>{V(g.errors,e,t),B.state.next({errors:g.errors})})(t,s),n=e=>{clearTimeout(U),U=setTimeout(l,e)},n(e.delayError)):(clearTimeout(U),n=null,s?V(g.errors,t,s):H(g.errors,t)),(s?!z(o,s):o)||!k(a)||i){const e={...a,...i&&p(r)?{isValid:r}:{},errors:g.errors,name:t};g={...g,...e},B.state.next(e)}q(!1)})(s,d,c,w))}},ge=(e,t)=>{if(y(g.errors,t)&&e.focus)return e.focus(),1},ve=async(e,t={})=>{let r,s;const a=E(e);if(q(!0),u.resolver){const t=await(async e=>{const{errors:t}=await ee(e);if(e)for(const r of e){const e=y(t,r);e?V(g.errors,r,e):H(g.errors,r)}else g.errors=t;return t})(f(e)?e:a);r=k(t),s=e?!a.some((e=>y(t,e))):r}else e?(s=(await Promise.all(a.map((async e=>{const t=y(v,e);return await te(t&&t._f?{[e]:t}:t)})))).every(Boolean),(s||g.isValid)&&I()):s=r=await te(v);return B.state.next({...!w(e)||L.isValid&&r!==g.isValid?{}:{name:e},...u.resolver||!e?{isValid:r}:{},errors:g.errors,isValidating:!1}),t.shouldFocus&&!s&&T(v,ge,e?a:P.mount),s},ke=e=>{const t={..._,...A.mount?D:{}};return f(e)?t:w(e)?y(t,e):e.map((e=>y(t,e)))},Ee=(e,t)=>({invalid:!!y((t||g).errors,e),isDirty:!!y((t||g).dirtyFields,e),isTouched:!!y((t||g).touchedFields,e),error:y((t||g).errors,e)}),we=(e,t,r)=>{const s=(y(v,e,{_f:{}})._f||{}).ref;V(g.errors,e,{...t,ref:s}),B.state.next({name:e,errors:g.errors,isValid:!1}),r&&r.shouldFocus&&s&&s.focus&&s.focus()},Se=(e,t={})=>{for(const r of e?E(e):P.mount)P.mount.delete(r),P.array.delete(r),t.keepValue||(H(v,r),H(D,r)),!t.keepError&&H(g.errors,r),!t.keepDirty&&H(g.dirtyFields,r),!t.keepTouched&&H(g.touchedFields,r),!u.shouldUnregister&&!t.keepDefaultValue&&H(_,r);B.values.next({values:{...D}}),B.state.next({...g,...t.keepDirty?{isDirty:me()}:{}}),!t.keepIsValid&&I()},_e=({disabled:e,name:t,field:r,fields:s,value:a})=>{if(p(e)){const n=e?void 0:f(a)?ae(r?r._f:y(s,t)._f):a;V(D,t,n),Z(t,n,!1,!1,!0)}},De=(e,t={})=>{let r=y(v,e);const s=p(t.disabled);return V(v,e,{...r||{},_f:{...r&&r._f?r._f:{ref:{name:e}},name:e,mount:!0,...t}}),P.mount.add(e),r?_e({field:r,disabled:t.disabled,name:e,value:t.value}):$(e,!0,t.value),{...s?{disabled:t.disabled}:{},...u.progressive?{required:!!t.required,min:oe(t.min),max:oe(t.max),minLength:oe(t.minLength),maxLength:oe(t.maxLength),pattern:oe(t.pattern)}:{},name:e,onChange:be,onBlur:be,ref:s=>{if(s){De(e,t),r=y(v,e);const a=f(s.value)&&s.querySelectorAll&&s.querySelectorAll("input,select,textarea")[0]||s,n=Q(a),o=r._f.refs||[];if(n?o.find((e=>e===a)):a===r._f.ref)return;V(v,e,{_f:{...r._f,...n?{refs:[...o.filter(Y),a,...Array.isArray(y(_,e))?[{}]:[]],ref:{type:a.type,name:e}}:{ref:a}}}),$(e,!1,void 0,a)}else r=y(v,e,{}),r._f&&(r._f.mount=!1),(u.shouldUnregister||t.shouldUnregister)&&(!l(P.array,e)||!A.action)&&P.unMount.add(e)}}},Ve=()=>u.shouldFocusError&&T(v,ge,P.mount),Ae=(e,t)=>async r=>{let s;r&&(r.preventDefault&&r.preventDefault(),r.persist&&r.persist());let a=d(D);if(B.state.next({isSubmitting:!0}),u.resolver){const{errors:e,values:t}=await ee();g.errors=e,a=t}else await te(v);if(H(g.errors,"root"),k(g.errors)){B.state.next({errors:{}});try{await e(a,r)}catch(e){s=e}}else t&&await t({...g.errors},r),Ve(),setTimeout(Ve);if(B.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:k(g.errors)&&!s,submitCount:g.submitCount+1,errors:g.errors}),s)throw s},Fe=(r,s={})=>{const a=r?d(r):_,n=d(a),o=r&&!k(r)?n:_;if(s.keepDefaultValues||(_=a),!s.keepValues){if(s.keepDirtyValues)for(const e of P.mount)y(g.dirtyFields,e)?V(o,e,y(D,e)):he(e,y(o,e));else{if(c&&f(r))for(const e of P.mount){const t=y(v,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(j(e)){const t=e.closest("form");if(t){t.reset();break}}}}v={}}D=e.shouldUnregister?s.keepDefaultValues?d(_):{}:d(o),B.array.next({values:{...o}}),B.values.next({values:{...o}})}P={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!A.mount&&t(),A.mount=!L.isValid||!!s.keepIsValid||!!s.keepDirtyValues,A.watch=!!e.shouldUnregister,B.state.next({submitCount:s.keepSubmitCount?g.submitCount:0,isDirty:s.keepDirty?g.isDirty:!(!s.keepDefaultValues||z(r,_)),isSubmitted:!!s.keepIsSubmitted&&g.isSubmitted,dirtyFields:s.keepDirtyValues?s.keepDefaultValues&&D?re(_,D):g.dirtyFields:s.keepDefaultValues&&r?re(_,r):{},touchedFields:s.keepTouched?g.touchedFields:{},errors:s.keepErrors?g.errors:{},isSubmitSuccessful:!!s.keepIsSubmitSuccessful&&g.isSubmitSuccessful,isSubmitting:!1})},xe=(e,t)=>Fe(O(e)?e(D):e,t);return{control:{register:De,unregister:Se,getFieldState:Ee,handleSubmit:Ae,setError:we,_executeSchema:ee,_getWatch:fe,_getDirty:me,_updateValid:I,_removeUnmounted:()=>{for(const e of P.unMount){const t=y(v,e);t&&(t._f.refs?t._f.refs.every((e=>!Y(e))):!Y(t._f.ref))&&Se(e)}P.unMount=new Set},_updateFieldArray:(e,t=[],r,s,a=!0,n=!0)=>{if(s&&r){if(A.action=!0,n&&Array.isArray(y(v,e))){const t=r(y(v,e),s.argA,s.argB);a&&V(v,e,t)}if(n&&Array.isArray(y(g.errors,e))){const t=r(y(g.errors,e),s.argA,s.argB);a&&V(g.errors,e,t),ce(g.errors,e)}if(L.touchedFields&&n&&Array.isArray(y(g.touchedFields,e))){const t=r(y(g.touchedFields,e),s.argA,s.argB);a&&V(g.touchedFields,e,t)}L.dirtyFields&&(g.dirtyFields=re(_,D)),B.state.next({name:e,isDirty:me(e,t),dirtyFields:g.dirtyFields,errors:g.errors,isValid:g.isValid})}else V(D,e,t)},_updateDisabledField:_e,_getFieldArray:t=>m(y(A.mount?D:_,t,e.shouldUnregister?y(_,t,[]):[])),_reset:Fe,_resetDefaultValues:()=>O(u.defaultValues)&&u.defaultValues().then((e=>{xe(e,u.resetOptions),B.state.next({isLoading:!1})})),_updateFormState:e=>{g={...g,...e}},_disableForm:e=>{p(e)&&(B.state.next({disabled:e}),T(v,((t,r)=>{let s=e;const a=y(v,r);a&&p(a._f.disabled)&&(s||(s=a._f.disabled)),t.disabled=s}),0,!1))},_subjects:B,_proxyFormState:L,_setErrors:e=>{g.errors=e,B.state.next({errors:g.errors,isValid:!1})},get _fields(){return v},get _formValues(){return D},get _state(){return A},set _state(e){A=e},get _defaultValues(){return _},get _names(){return P},set _names(e){P=e},get _formState(){return g},set _formState(e){g=e},get _options(){return u},set _options(e){u={...u,...e}}},trigger:ve,register:De,handleSubmit:Ae,watch:(e,t)=>O(e)?B.values.subscribe({next:r=>e(fe(void 0,t),r)}):fe(e,t,!0),setValue:he,getValues:ke,reset:xe,resetField:(e,t={})=>{y(v,e)&&(f(t.defaultValue)?he(e,d(y(_,e))):(he(e,t.defaultValue),V(_,e,d(t.defaultValue))),t.keepTouched||H(g.touchedFields,e),t.keepDirty||(H(g.dirtyFields,e),g.isDirty=t.defaultValue?me(e,d(y(_,e))):me()),t.keepError||(H(g.errors,e),L.isValid&&I()),B.state.next({...g}))},clearErrors:e=>{e&&E(e).forEach((e=>H(g.errors,e))),B.state.next({errors:e?g.errors:{}})},unregister:Se,setError:we,setFocus:(e,t={})=>{const r=y(v,e),s=r&&r._f;if(s){const e=s.refs?s.refs[0]:s.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:Ee}}function fe(t={}){const r=e.useRef(),s=e.useRef(),[a,n]=e.useState({isDirty:!1,isValidating:!1,isLoading:O(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:O(t.defaultValues)?void 0:t.defaultValues});r.current||(r.current={...me(t,(()=>n((e=>({...e}))))),formState:a});const o=r.current.control;return o._options=t,function(t){const r=e.useRef(t);r.current=t,e.useEffect((()=>{const e=!t.disabled&&r.current.subject&&r.current.subject.subscribe({next:r.current.next});return()=>{e&&e.unsubscribe()}}),[t.disabled])}({subject:o._subjects.state,next:e=>{((e,t,r,s)=>{r(e);const{name:a,...n}=e;return k(n)||Object.keys(n).length>=Object.keys(t).length||Object.keys(n).find((e=>t[e]===(!s||b.all)))})(e,o._proxyFormState,o._updateFormState,!0)&&n({...o._formState})}}),e.useEffect((()=>o._disableForm(t.disabled)),[o,t.disabled]),e.useEffect((()=>{if(o._proxyFormState.isDirty){const e=o._getDirty();e!==a.isDirty&&o._subjects.state.next({isDirty:e})}}),[o,a.isDirty]),e.useEffect((()=>{t.values&&!z(t.values,s.current)?(o._reset(t.values,o._options.resetOptions),s.current=t.values,n((e=>({...e})))):o._resetDefaultValues()}),[t.values,o]),e.useEffect((()=>{t.errors&&o._setErrors(t.errors)}),[t.errors,o]),e.useEffect((()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()})),e.useEffect((()=>{t.shouldUnregister&&o._subjects.values.next({values:o._getWatch()})}),[t.shouldUnregister,o]),r.current.formState=((e,t,r,s=!0)=>{const a={defaultValues:t._defaultValues};for(const n in e)Object.defineProperty(a,n,{get:()=>{const a=n;return t._proxyFormState[a]!==b.all&&(t._proxyFormState[a]=!s||b.all),r&&(r[a]=!0),e[a]}});return a})(a,o),r.current}const ye=({message:t,type:r})=>(0,e.createElement)("div",{className:"alert alert-"+r+" alert-dismissible fade show",role:"alert"},(0,e.createElement)("strong",null,t),(0,e.createElement)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},(0,e.createElement)("span",{"aria-hidden":"true"},"Ã—"))),pe=({fetchTasks:t})=>{const[r,s]=(0,e.useState)(""),[a,n]=(0,e.useState)("success"),[o,i]=(0,e.useState)(!1),{register:l,handleSubmit:u,watch:c,reset:d,formState:{errors:m}}=fe();return(0,e.createElement)("div",{className:"taskForm-wrapper mb-5"},o&&(0,e.createElement)(ye,{message:r,type:a}),(0,e.createElement)("form",{className:"taskForm",onSubmit:u((async e=>{let r={title:e?.taskTitle,description:e?.taskDescription,duration:e?.taskDuration,status:e?.taskStatus},a=makWPtmData.restRoot+"wptm/v1/create-task";try{const e=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":makWPtmData?.nonce},body:JSON.stringify(r)});if(console.log(e),e.ok){const r=await e.json();console.log(r),r.success&&(d(),n("success"),i(!0),s(r.message),t())}else{const t=await e.json();console.error(t),n("danger"),i(!0),s("Something went wrong!")}}catch(e){console.error("Error:",e),n("danger"),i(!0),s("Something went wrong!")}}))},(0,e.createElement)("div",{className:"mb-3"},(0,e.createElement)("label",{for:"taskTitle",className:"form-label"},"Task Title"),(0,e.createElement)("input",{type:"text",className:"form-control",...l("taskTitle",{required:!0})})),(0,e.createElement)("div",{className:"mb-3"},(0,e.createElement)("label",{for:"taskDescription",className:"form-label"},"Description"),(0,e.createElement)("textarea",{className:"form-control",rows:"2",...l("taskDescription")})),(0,e.createElement)("div",{className:"mb-3"},(0,e.createElement)("label",{for:"taskDuration",className:"form-label"},"Duration (hours)"),(0,e.createElement)("input",{type:"number",className:"form-control",defaultValue:"0",...l("taskDuration")})),(0,e.createElement)("div",{className:"mb-3"},(0,e.createElement)("label",{for:"taskStatus",className:"form-label"},"Status"),(0,e.createElement)("select",{className:"form-select",defaultValue:"pending",...l("taskStatus")},(0,e.createElement)("option",{value:"pending"},"Pending"),(0,e.createElement)("option",{value:"in-progress"},"In Progress"),(0,e.createElement)("option",{value:"completed"},"Completed"))),(0,e.createElement)("input",{type:"submit",value:"Create Task",className:"btn btn-primary"})))},he=({taskId:t,fetchTasks:r})=>{const[s,a]=(0,e.useState)(""),[n,o]=(0,e.useState)("success"),[i,l]=(0,e.useState)(!1),{register:u,handleSubmit:c,setValue:d,watch:m,reset:f,formState:{errors:y}}=fe();return(0,e.useEffect)((()=>{(async()=>{let e=makWPtmData.restRoot+`wptm/v1/get-task/${t}`;try{const t=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":makWPtmData?.nonce}});if(t.ok){const e=await t.json();d("taskTitle",e?.title),d("taskDescription",e?.description),d("taskDuration",e?.duration),d("taskStatus",e?.status)}else console.error("Failed to fetch task:",t.statusText)}catch(e){console.error("Error:",e)}})()}),[t]),(0,e.createElement)("div",{className:"taskForm-wrapper mb-5"},i&&(0,e.createElement)(ye,{message:s,type:n}),(0,e.createElement)("form",{className:"taskForm",onSubmit:c((async e=>{let s={title:e?.taskTitle,description:e?.taskDescription,duration:e?.taskDuration,status:e?.taskStatus},n=makWPtmData.restRoot+`wptm/v1/update-task/${t}`;try{const e=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":makWPtmData?.nonce},body:JSON.stringify(s)});if(e.ok){const t=await e.json();console.log(t),t.success&&(o("success"),l(!0),a(t.message),r())}else{const t=await e.json();console.error(t),o("danger"),l(!0),a("Something went wrong!")}}catch(e){console.error("Error:",e),o("danger"),l(!0),a("Something went wrong!")}}))},(0,e.createElement)("div",{className:"mb-3"},(0,e.createElement)("label",{for:"taskTitle",className:"form-label"},"Task Title"),(0,e.createElement)("input",{type:"text",className:"form-control",...u("taskTitle")})),(0,e.createElement)("div",{className:"mb-3"},(0,e.createElement)("label",{for:"taskDescription",className:"form-label"},"Description"),(0,e.createElement)("textarea",{className:"form-control",rows:"2",...u("taskDescription")})),(0,e.createElement)("div",{className:"mb-3"},(0,e.createElement)("label",{for:"taskDuration",className:"form-label"},"Duration (hours)"),(0,e.createElement)("input",{type:"number",className:"form-control",...u("taskDuration")})),(0,e.createElement)("div",{className:"mb-3"},(0,e.createElement)("label",{for:"taskStatus",className:"form-label"},"Status"),(0,e.createElement)("select",{className:"form-select",...u("taskStatus")},(0,e.createElement)("option",{value:"pending"},"Pending"),(0,e.createElement)("option",{value:"in-progress"},"In Progress"),(0,e.createElement)("option",{value:"completed"},"Completed"))),(0,e.createElement)("input",{type:"submit",value:"Update Task",className:"btn btn-primary"})))};(0,window.wp.element.render)((0,e.createElement)((()=>{const[r,s]=(0,e.useState)(!1),[a,n]=(0,e.useState)(!1),[o,i]=(0,e.useState)(0),[l,u]=(0,e.useState)([]),c=async()=>{let e=makWPtmData.restRoot+"wptm/v1/get-tasks";try{const t=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":makWPtmData?.nonce}});if(t.ok){const e=await t.json();u(e)}else console.error("Failed to fetch tasks:",t.statusText)}catch(e){console.error("Error:",e)}};return(0,e.createElement)("div",null,(0,e.createElement)("h2",{className:"app-title text-success"},"Task Manager"),(0,e.createElement)("hr",null),(0,e.createElement)("button",{class:"btn btn-outline-primary mb-3",onClick:()=>{s(!0),n(!1)}},"Create New Task"),(r||a)&&(0,e.createElement)("button",{class:"btn btn-outline-success ms-2 mb-3",onClick:()=>{s(!1),n(!1)}},"All Tasks"),r&&(0,e.createElement)(pe,{fetchTasks:c}),a&&(0,e.createElement)(he,{taskId:o,fetchTasks:c}),(0,e.createElement)(t,{tasks:l,fetchTasks:c,setCurrentTaskId:i,setShowCreateForm:s,setShowUpdateForm:n}))}),null),document.getElementById("wp_task_manager"))})();